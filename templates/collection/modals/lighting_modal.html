<!-- Lighting Edit Modal -->
<div class="modal fade edit-modal" id="editProductModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title d-flex align-items-center">
          <i class="fas fa-edit me-2"></i>Edit Light - <span id="editProductTitle">Product</span>
          <span id="modalStatusBadge" class="badge bg-secondary ms-3" style="display: none;">Ready</span>
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
        <!-- Pricing Comparison Section -->
        {% if collection_config.pricing_enabled %}
        <div class="pricing-section mb-4">
          <h6><i class="fas fa-dollar-sign me-2"></i>Pricing Comparison</h6>
          <div class="row">
            <div class="col-md-4">
              <div class="pricing-card">
                <div class="pricing-icon">
                  <i class="fas fa-store"></i>
                </div>
                <span class="pricing-label">Our Price</span>
                <div class="pricing-amount" id="ourCurrentPrice">$0.00</div>
                <div class="pricing-status" id="ourPriceStatus">Current pricing</div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="pricing-card">
                <div class="pricing-icon">
                  <i class="fas fa-building"></i>
                  <span class="pricing-label" id="competitorLabel">Competitor</span>
                </div>
                <div class="pricing-amount" id="competitorPrice">$0.00</div>
                <div class="pricing-status">Market comparison</div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="pricing-card" id="priceDifferenceCard">
                <div class="pricing-icon">
                  <i class="fas fa-chart-line"></i>
                </div>
                <span class="pricing-label">Difference</span>
                <div class="pricing-amount" id="priceDifference">$0.00</div>
                <div class="pricing-status">vs competitor</div>
              </div>
            </div>
          </div>
        </div>
        {% endif %}

        <!-- Image Gallery Section -->
        <div class="image-section mb-4">
          <h6>
            <i class="fas fa-images me-2"></i>Product Images
            <span class="image-count-badge" id="modalImageCountBadge">0 images</span>
          </h6>

          <div class="main-image-container" id="modalMainImageContainer">
              <div class="image-placeholder" id="modalImagePlaceholder">
                  <i class="fas fa-image"></i>
                  <p>No image available</p>
              </div>

              <button class="image-nav-btn prev" id="modalPrevImageBtn" onclick="navigateModalImage(-1)" style="display: none;">
                  <i class="fas fa-chevron-left"></i>
              </button>
              <button class="image-nav-btn next" id="modalNextImageBtn" onclick="navigateModalImage(1)" style="display: none;">
                  <i class="fas fa-chevron-right"></i>
              </button>

              <div class="image-counter" id="modalImageCounter" style="display: none;">
                  <span id="modalCurrentImageIndex">1</span> / <span id="modalTotalImages">1</span>
              </div>
          </div>

          <div class="thumbnail-gallery" id="modalThumbnailGallery" style="display: none;">
              <!-- Thumbnails will be dynamically populated -->
          </div>
        </div>

        <!-- Product Form -->
        <form id="editProductForm">
          <!-- Basic Information -->
          <div class="field-group" id="basicInfoGroup">
            <h6><i class="fas fa-info-circle me-2"></i>Basic Information</h6>
            <div class="row">
              <div class="col-md-4">
                <div class="mb-3">
                  <label class="form-label">SKU</label>
                  <input type="text" class="form-control" id="editSku" placeholder="Product SKU">
                </div>
              </div>
              <div class="col-md-4">
                <div class="mb-3">
                  <label class="form-label">Product Title</label>
                  <input type="text" class="form-control" id="editTitle" placeholder="Product Title">
                </div>
              </div>
              <div class="col-md-4">
                <div class="mb-3">
                  <label class="form-label">Vendor/Brand</label>
                  <input type="text" class="form-control" id="editVendor" placeholder="Vendor Name">
                </div>
              </div>
            </div>
          </div>

          <!-- Lighting Specifications -->
          <div class="field-group wattage-info" id="lightingSpecsGroup">
            <h6><i class="fas fa-lightbulb me-2"></i>Lighting Specifications</h6>
            <div class="row">
              <div class="col-md-4">
                <div class="mb-3">
                  <label class="form-label">Light Type</label>
                  <select class="form-control" id="editLightType">
                    <option value="">Select...</option>
                    <option value="Ceiling Light">Ceiling Light</option>
                    <option value="Pendant Light">Pendant Light</option>
                    <option value="Wall Light">Wall Light</option>
                    <option value="Table Lamp">Table Lamp</option>
                    <option value="Floor Lamp">Floor Lamp</option>
                    <option value="Chandelier">Chandelier</option>
                    <option value="Track Light">Track Light</option>
                    <option value="Recessed Light">Recessed Light</option>
                  </select>
                </div>
              </div>
              <div class="col-md-4">
                <div class="mb-3">
                  <label class="form-label">Bulb Type</label>
                  <select class="form-control" id="editBulbType">
                    <option value="">Select...</option>
                    <option value="LED">LED</option>
                    <option value="Halogen">Halogen</option>
                    <option value="Incandescent">Incandescent</option>
                    <option value="CFL">CFL</option>
                    <option value="Fluorescent">Fluorescent</option>
                  </select>
                </div>
              </div>
              <div class="col-md-4">
                <div class="mb-3">
                  <label class="form-label">Wattage (W)</label>
                  <input type="number" class="form-control" id="editWattage" placeholder="Wattage">
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-4">
                <div class="mb-3">
                  <label class="form-label">Voltage (V)</label>
                  <select class="form-control" id="editVoltage">
                    <option value="">Select...</option>
                    <option value="12V">12V</option>
                    <option value="24V">24V</option>
                    <option value="240V">240V</option>
                  </select>
                </div>
              </div>
              <div class="col-md-4">
                <div class="mb-3">
                  <label class="form-label">Color Temperature (K)</label>
                  <select class="form-control" id="editColorTemperature">
                    <option value="">Select...</option>
                    <option value="2700K">2700K (Warm White)</option>
                    <option value="3000K">3000K (Soft White)</option>
                    <option value="4000K">4000K (Cool White)</option>
                    <option value="5000K">5000K (Daylight)</option>
                    <option value="6500K">6500K (Cool Daylight)</option>
                  </select>
                </div>
              </div>
              <div class="col-md-4">
                <div class="mb-3">
                  <label class="form-label">Lumens</label>
                  <input type="number" class="form-control" id="editLumens" placeholder="Light output">
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-4">
                <div class="mb-3">
                  <label class="form-label">Dimming Compatible</label>
                  <select class="form-control" id="editDimmingCompatible">
                    <option value="">Select...</option>
                    <option value="Yes">Yes</option>
                    <option value="No">No</option>
                  </select>
                </div>
              </div>
              <div class="col-md-4">
                <div class="mb-3">
                  <label class="form-label">IP Rating</label>
                  <select class="form-control" id="editIpRating">
                    <option value="">Select...</option>
                    <option value="IP20">IP20 (Indoor Dry)</option>
                    <option value="IP44">IP44 (Bathroom Zone 2+)</option>
                    <option value="IP54">IP54 (Outdoor Covered)</option>
                    <option value="IP65">IP65 (Outdoor Exposed)</option>
                  </select>
                </div>
              </div>
              <div class="col-md-4">
                <div class="mb-3">
                  <label class="form-label">Mounting Type</label>
                  <select class="form-control" id="editMountingType">
                    <option value="">Select...</option>
                    <option value="Ceiling Mount">Ceiling Mount</option>
                    <option value="Wall Mount">Wall Mount</option>
                    <option value="Surface Mount">Surface Mount</option>
                    <option value="Recessed">Recessed</option>
                    <option value="Track Mount">Track Mount</option>
                    <option value="Pendant">Pendant</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <!-- Physical Specifications -->
          <div class="field-group" id="physicalSpecsGroup">
            <h6><i class="fas fa-ruler me-2"></i>Physical Specifications</h6>
            <div class="row">
              <div class="col-md-4">
                <div class="mb-3">
                  <label class="form-label">Material</label>
                  <select class="form-control" id="editMaterial">
                    <option value="">Select...</option>
                    <option value="Aluminum">Aluminum</option>
                    <option value="Steel">Steel</option>
                    <option value="Glass">Glass</option>
                    <option value="Plastic">Plastic</option>
                    <option value="Brass">Brass</option>
                    <option value="Wood">Wood</option>
                  </select>
                </div>
              </div>
              <div class="col-md-4">
                <div class="mb-3">
                  <label class="form-label">Finish</label>
                  <select class="form-control" id="editFinish">
                    <option value="">Select...</option>
                    <option value="White">White</option>
                    <option value="Black">Black</option>
                    <option value="Chrome">Chrome</option>
                    <option value="Brushed Nickel">Brushed Nickel</option>
                    <option value="Bronze">Bronze</option>
                    <option value="Gold">Gold</option>
                  </select>
                </div>
              </div>
              <div class="col-md-4">
                <div class="mb-3">
                  <label class="form-label">Weight (kg)</label>
                  <input type="number" step="0.1" class="form-control" id="editWeightKg" placeholder="Weight">
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">Dimensions (mm)</label>
                  <input type="text" class="form-control" id="editDimensionsMm" placeholder="L x W x H">
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">Warranty (Years)</label>
                  <input type="number" class="form-control" id="editWarrantyYears" placeholder="Years">
                </div>
              </div>
            </div>
          </div>

          <!-- Pricing Information -->
          <div class="field-group" id="pricingGroup">
            <h6><i class="fas fa-dollar-sign me-2"></i>Pricing Information</h6>
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">RRP Price ($)</label>
                  <input type="number" step="0.01" class="form-control" id="editRrpPrice" placeholder="Recommended Retail Price">
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">Sale Price ($)</label>
                  <input type="number" step="0.01" class="form-control" id="editSalePrice" placeholder="Current Sale Price">
                </div>
              </div>
            </div>
          </div>

          <!-- SEO Information -->
          <div class="field-group" id="seoGroup">
            <h6><i class="fas fa-search me-2"></i>SEO Information</h6>
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">SEO Title</label>
                  <input type="text" class="form-control" id="editSeoTitle" placeholder="SEO optimized title">
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">SEO Description</label>
                  <textarea class="form-control" id="editSeoDescription" rows="3" placeholder="SEO description"></textarea>
                </div>
              </div>
            </div>
          </div>

          <!-- Product Description -->
          <div class="field-group" id="descriptionGroup">
            <h6><i class="fas fa-file-text me-2"></i>Product Content</h6>
            <div class="mb-3">
              <label class="form-label">Product Description (HTML)</label>
              <div class="position-relative">
                  <textarea class="form-control" id="editBodyHtml" rows="4" placeholder="HTML product description"></textarea>
                  <button type="button" class="btn btn-ai-description btn-sm position-absolute top-0 end-0 m-2" onclick="generateAIDescription()">
                      <i class="fas fa-magic me-1"></i>AI Generate
                  </button>
              </div>
            </div>
            <div class="mb-3">
              <label class="form-label">Features</label>
              <textarea class="form-control" id="editFeatures" rows="3" placeholder="Key product features"></textarea>
            </div>
            <div class="mb-3">
              <label class="form-label">Care Instructions</label>
              <textarea class="form-control" id="editCareInstructions" rows="2" placeholder="Care and maintenance instructions"></textarea>
            </div>
          </div>
        </form>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-outline-danger" onclick="deleteProduct()">
          <i class="fas fa-trash me-1"></i>Delete
        </button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" onclick="saveProduct()">
          <i class="fas fa-save me-1"></i>Save Changes
        </button>
      </div>
    </div>
  </div>
</div>